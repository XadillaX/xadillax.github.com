
<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <title>Vjudge Submitter :: 艾克斯の編碼者</title>
    
    <meta name="author" content="XadillaX">

    <!-- Enable responsive viewport -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <script type="text/javascript" src="/assets/themes/graydiary/js/jquery-2.0.3.min.js"></script>
    <script type="text/javascript" src="/assets/themes/graydiary/js/main.js"></script>
    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link href='http://fonts.googleapis.com/css?family=Macondo' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Raleway' rel='stylesheet' type='text/css'>

    <link href="/assets/themes/graydiary/css/main.css" rel="stylesheet">
    <link href="/assets/themes/graydiary/css/syntax.css" type="text/css" rel="stylesheet" />
</head>
<body>
    <div id="back-to-top">
        <span>▲</span>
        <p>Top</p>
    </div>

    <div id="wrapper">
        <div id="sidebar" class="fl">
            <a href="http://127.0.0.1:4000">
                <img class="avatar" src="/assets/themes/graydiary/images/avatar.jpg" alt="艾克斯の編碼者" />
            </a>
            <p class="italic">艾克斯の編碼者</p>
            <p></p>

            <ul id="primary-nav">
                <li><span class="home"></span><a href="http://127.0.0.1:4000">首页</a></li>
                <li><span class="portfolio"></span><a href="http://127.0.0.1:4000/archive.html">存档</a></li>
                <li><span class="contact"></span><a href="http://127.0.0.1:4000/categories.html">分类</a></li>
                <li><span class="about"></span><a href="http://127.0.0.1:4000/about.html">关于</a></li>
                <li><span class="mail"></span><a href="http://127.0.0.1:4000/rss.xml">订阅</a></li>
            </ul>
        </div>

        <div id="container" class="fr">
            <div id="main" class="fl">
                <div class="mini-wrapper">
                    
<div class="gridcol-1">
    <h1 class="pattern">
        <span>
            Vjudge Submitter
        </span>
    </h1>

    <span class="fl">
        <span class="date">07 August 2013</span>
        <span class="tags">
            
            
            
            
            <a href="/tags.html#intro-ref">intro</a>
            
            <a href="/tags.html#beginner-ref">beginner</a>
            
            <a href="/tags.html#jekyll-ref">jekyll</a>
            
            <a href="/tags.html#tutorial-ref">tutorial</a>
            
            
            
            
        </span>
    </span>

    <div class="cl"></div>

    <div class="rich-content">
        <h3 id="welcome-to-use-vjudge-submitter">WELCOME TO USE VJUDGE SUBMITTER</h3>
<h4 id="whats-this">WHAT’S THIS</h4>
<p><strong><em>Virtual Judge</em></strong> is something like the Polymerization of <strong><em>Online Judge</em></strong>.</p>
<p>The <strong><em>Virtual Judge</em></strong> will contain several <strong><em>Online Judge</em></strong>’s problems and when you submit code to one problem, the backend of <strong><em>Virtual Judge</em></strong> will submit your code to the origin <strong><em>Online Judge</em></strong> and fetch the submission record status and return.</p>
<p>This project is mainly for the people who is going to develop him/her self <strong><em>Virtual Judge</em></strong>.</p>
<p>It gives you the unified API functions of each different <strong><em>Online Judges</em></strong>.</p>
<p>The APIs including login, submit, and fetch result. If you have some better ideas, maybe it will contain an API based on your idea!</p>
<p>You contribute to <code>vjudge-submitter</code> and of cause <code>vjudge-submitter</code> will help you to easy build a Virtual Judge core!</p>
<h4 id="preparation">PREPARATION</h4>
<p>It’s easy to use <strong><em>VJudge Submitter</em></strong> in your own <strong><em>Virtual Judge</em></strong> project.</p>
<p>First of all, come to your project directory and create a new directory if it not exists yet:</p>
<div class="highlight"><pre><code class="sh"><span class="nv">$ </span>mkdir node_modules
</code></pre></div>
 

<p>And then you can clone the <strong><em>VJudge Submitter</em></strong> to that directory or uncompress it via the package you downloaded:</p>
<div class="highlight"><pre><code class="sh"><span class="nv">$ </span>git clone https://github.com/XadillaX/vjudge-submitter.git
</code></pre></div>
 

<p>or</p>
<div class="highlight"><pre><code class="sh"><span class="nv">$ </span>tar zxf filename.tar.gz
</code></pre></div>
 

<p>Congratulations! Now you can use it in your own project!</p>
<h3 id="how-to-use-it">HOW TO USE IT</h3>
<h4 id="create">CREATE</h4>
<p>You need get a submitter that <strong><em>VJudge Submitter</em></strong> supported. (You can view it in the <a href="#supported-list">supported list</a>)</p>
<div class="highlight"><pre><code class="js"><span class="kd">var</span> <span class="nx">vjs</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;vjudge-submitter&quot;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">foo</span> <span class="o">=</span> <span class="nx">vjs</span><span class="p">.</span><span class="nx">getSubmitter</span><span class="p">(</span><span class="s2">&quot;online judge name&quot;</span><span class="p">);</span>
</code></pre></div>
 

<p>You can change the logger level:</p>
<div class="highlight"><pre><code class="js"><span class="nx">vjs</span><span class="p">.</span><span class="nx">setDefaultLogLevel</span><span class="p">(</span><span class="s2">&quot;TRACE|DEBUG|INFO|WARNING|ERROR|FATAL&quot;</span><span class="p">);</span>
</code></pre></div>
 

<blockquote>
<p><strong>IMPORTANT</strong>: It just influence the submitter after calling this function.</p>
</blockquote>
<h4 id="login">LOGIN</h4>
<p>The <code>login</code> function is very simple:</p>
<div class="highlight"><pre><code class="js"><span class="nx">foo</span><span class="p">.</span><span class="nx">login</span><span class="p">(</span><span class="nx">username</span><span class="p">,</span> <span class="nx">password</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
</code></pre></div>
 

<p>The only thing you shold care is the <code>callback</code>, it should be written like that:</p>
<div class="highlight"><pre><code class="js"><span class="kd">function</span> <span class="nx">callback</span><span class="p">(</span><span class="nx">status</span><span class="p">,</span> <span class="nx">msg</span><span class="p">,</span> <span class="nx">baseheader</span><span class="p">)</span> <span class="p">{</span>
   <span class="c1">//blahblah...</span>
<span class="p">}</span>
</code></pre></div>
 

<p>The parameter are:</p>
<ul>
<li><strong>status</strong>: returns <code>true</code> when successfully and <code>false</code> when failed.</li>
<li><strong>msg</strong>: it will be an empty string when successfully and it will be the <strong>error message</strong> when failed.</li>
<li><strong>baseheader</strong>: this parameter will be used in <code>submit</code> or <code>result</code> function. Most importantly, this parameter includes the cookie information.</li>
</ul>
<h4 id="submit">SUBMIT</h4>
<p>Refer to the code below:</p>
<div class="highlight"><pre><code class="js"><span class="nx">foo</span><span class="p">.</span><span class="nx">submit</span><span class="p">(</span><span class="nx">problemID</span><span class="p">,</span> <span class="nx">language</span><span class="p">,</span> <span class="nx">code</span><span class="p">,</span> <span class="nx">baseheader</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
</code></pre></div>
 

<blockquote>
<p><strong>Hint</strong>: The <code>baseheader</code> here is the <code>baseheader</code> passed from the callback function of <code>login</code> function.</p>
</blockquote>
<p>And the callback function of <code>submit</code> should be like:</p>
<div class="highlight"><pre><code class="js"><span class="kd">function</span> <span class="nx">callback</span><span class="p">(</span><span class="nx">status</span><span class="p">,</span> <span class="nx">msg</span><span class="p">,</span> <span class="nx">baseheader</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">//blahblah...</span>
<span class="p">}</span>
</code></pre></div>
 

<p>It’s similar to the callback function of <code>login</code> callback function’s.</p>
<h4 id="result">RESULT</h4>
<p>This function is to fetch the running record of <strong><em>last</em></strong> submission. (Because we assume one <strong>Virtual Judge Account</strong> just doing one thing at one moment)</p>
<div class="highlight"><pre><code class="js"><span class="nx">foo</span><span class="p">.</span><span class="nx">result</span><span class="p">(</span><span class="nx">username</span><span class="p">,</span> <span class="nx">baseheader</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
</code></pre></div>
 

<p>Because we would like to fetch the <code>COMPILATION_ERROR</code> if the record is that, we must logged in. As a result, we should pass the cookie information into the function - that is the <code>baseheader</code>.</p>
<p>And the callback function should be written like:</p>
<div class="highlight"><pre><code class="js"><span class="kd">function</span> <span class="nx">callback</span><span class="p">(</span><span class="nx">status</span><span class="p">,</span> <span class="nx">msg</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">//blahblah...</span>
<span class="p">}</span>
</code></pre></div>
 

<blockquote>
<p><strong>NOTE</strong>: This callback maybe called several times.</p>
<ul>
<li>When the result is something like <code>COMPILING</code>, <code>RUNNING</code>, <code>QUEUING</code>, etc, the callback function will pass <code>false</code>, msg and the result is a <code>result object</code>.</li>
<li>When the fetching is wrong like <code>CONNECTION ERROR</code>, etc, the callback function will pass <code>false</code>, msg and the result is <code>null</code>. (It often happened when the submitter tries too many times but can’t get the right information)</li>
<li>When the fetching is right, the callback function will pass <code>true</code>, msg and the result is a <code>result object</code>.</li>
</ul>
</blockquote>
<p>The so-called <code>result object</code> is something like:</p>
<div class="highlight"><pre><code class="js"><span class="nx">result</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">runid</span>    <span class="o">:</span> <span class="s2">&quot;The running id&quot;</span><span class="p">,</span>
    <span class="nx">time</span>     <span class="o">:</span> <span class="s2">&quot;The running time&quot;</span><span class="p">,</span>
    <span class="nx">memo</span>     <span class="o">:</span> <span class="s2">&quot;The running memory&quot;</span><span class="p">,</span>
    <span class="nx">result</span>   <span class="o">:</span> <span class="s2">&quot;The result in that oj&quot;</span><span class="p">,</span>
    <span class="nx">finalresult</span> <span class="o">:</span> <span class="s2">&quot;The result after formatting&quot;</span>
<span class="p">};</span>
</code></pre></div>
 

<h4 id="a-simplest-example">A SIMPLEST EXAMPLE</h4>
<p>You can refer to the simplest example:</p>
<div class="highlight"><pre><code class="js"><span class="kd">var</span> <span class="nx">vjs</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;vjudge-submitter&quot;</span><span class="p">);</span>
<span class="nx">vjs</span><span class="p">.</span><span class="nx">setDefaultLogLevel</span><span class="p">(</span><span class="s2">&quot;INFO&quot;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">username</span> <span class="o">=</span> <span class="s2">&quot;username&quot;</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">password</span> <span class="o">=</span> <span class="s2">&quot;password&quot;</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">code</span> <span class="o">=</span> <span class="s2">&quot;blahblah...&quot;</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">nbut</span> <span class="o">=</span> <span class="nx">vjs</span><span class="p">.</span><span class="nx">getSubmitter</span><span class="p">(</span><span class="s2">&quot;nbut&quot;</span><span class="p">);</span>
<span class="nx">nbut</span><span class="p">.</span><span class="nx">login</span><span class="p">(</span><span class="nx">username</span><span class="p">,</span> <span class="nx">password</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">status</span><span class="p">,</span> <span class="nx">msg</span><span class="p">,</span> <span class="nx">baseheader</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Something goes wrong.</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">status</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">logger</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">msg</span><span class="p">);</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">submit</span><span class="p">(</span><span class="s2">&quot;1000&quot;</span><span class="p">,</span> <span class="s2">&quot;C++&quot;</span><span class="p">,</span> <span class="nx">code</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">status</span><span class="p">,</span> <span class="nx">msg</span><span class="p">,</span> <span class="nx">baseheader</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Something goes wrong</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">status</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">logger</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">msg</span><span class="p">);</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">result</span><span class="p">(</span><span class="nx">username</span><span class="p">,</span> <span class="s2">&quot;1000&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">status</span><span class="p">,</span> <span class="nx">msg</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">// Something goes wrong</span>
            <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">status</span> <span class="o">&amp;&amp;</span> <span class="kc">null</span> <span class="o">===</span> <span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">logger</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">msg</span><span class="p">);</span>
                <span class="k">return</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="c1">// PENDING</span>
            <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">status</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">text</span> <span class="o">=</span> <span class="s2">&quot;The code status is still [ &quot;</span> <span class="o">+</span> <span class="nx">result</span><span class="p">[</span><span class="s2">&quot;finalresult&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot; ]. Please wait.&quot;</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">logger</span><span class="p">.</span><span class="nx">info</span><span class="p">(</span><span class="nx">text</span><span class="p">);</span>
                <span class="k">return</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="kd">var</span> <span class="nx">text</span> <span class="o">=</span> <span class="s2">&quot;The code status is finished in &quot;</span> <span class="o">+</span> <span class="nx">result</span><span class="p">[</span><span class="s2">&quot;time&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;ms and &quot;</span> <span class="o">+</span> <span class="nx">result</span><span class="p">[</span><span class="s2">&quot;memo&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;K with [ &quot;</span> <span class="o">+</span> <span class="nx">result</span><span class="p">[</span><span class="s2">&quot;finalresult&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot; ]&quot;</span><span class="p">;</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">logger</span><span class="p">.</span><span class="nx">info</span><span class="p">(</span><span class="nx">text</span><span class="p">);</span>

            <span class="c1">// The status is COMPILATION ERROR</span>
            <span class="k">if</span><span class="p">(</span><span class="kc">undefined</span> <span class="o">!==</span> <span class="nx">result</span><span class="p">[</span><span class="s2">&quot;ceinfo&quot;</span><span class="p">])</span> <span class="p">{</span>
                <span class="nx">text</span> <span class="o">=</span> <span class="s2">&quot;And the CE information is:\n&quot;</span><span class="p">;</span>
                <span class="nx">text</span> <span class="o">+=</span> <span class="nx">result</span><span class="p">[</span><span class="s2">&quot;ceinfo&quot;</span><span class="p">];</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">logger</span><span class="p">.</span><span class="nx">info</span><span class="p">(</span><span class="nx">text</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">});</span>
    <span class="p">});</span>
<span class="p">});</span>
</code></pre></div>
 

<h3 id="contact">CONTACT</h3>
<p>Have a question?</p>
<ul>
<li>Email: <script type="text/javascript">
<!--
h='';a='&#64;';n='&#x61;&#100;&#x6d;&#x69;&#110;&#x23;&#120;&#x63;&#x6f;&#100;&#x65;&#114;&#46;&#x69;&#110;';e=n+a+h;
document.write('<a h'+'ref'+'="ma'+'ilto'+':'+e+'">'+e+'<\/'+'a'+'>');
// -->
</script><noscript>&#x61;&#100;&#x6d;&#x69;&#110;&#x23;&#120;&#x63;&#x6f;&#100;&#x65;&#114;&#46;&#x69;&#110;&#32;&#x61;&#116;&#32;</noscript></li>
<li>Issue: <a href="https://github.com/XadillaX/vjudge-submitter/issues">On GitHub</a></li>
</ul>
<h3 id="contribute-to-this-project">CONTRIBUTE TO THIS PROJECT</h3>
<p>Anyone and everyone is welcome to contribute. If you want to develop some Online Judge Support, you can do as the following link: <a href="https://github.com/XadillaX/vjudge-submitter/wiki/How-to-contribute-a-new-OJ-Submitter%3F">How to contribute a new OJ Submitter?</a></p>
<h3 id="authors">AUTHORS</h3>
<ul>
<li><a href="https://github.com/XadillaX">@XadillaX</a></li>
</ul>
<p>Thanks for assistance and contributions:</p>
<blockquote>
<p>EMPTY YET</p>
</blockquote>
<h3 id="license">LICENSE</h3>
<p>I DON’T KNOW YET. WHO CAN HELP ME?</p>
<h3 id="appendix">APPENDIX</h3>
<h4 id="online-judge-support-list">ONLINE JUDGE SUPPORT LIST</h4>
<ul>
<li><strong><em>aizu</em></strong>: <a href="http://judge.u-aizu.ac.jp/onlinejudge/">AIZU Online Judge</a></li>
<li><strong><em>lsu</em></strong>: <a href="http://acms.lsu.edu.cn:81/OnlineJudge/">LSU Online Judge</a></li>
<li><strong><em>nbut</em></strong>: <a href="http://acm.nbut.edu.cn/">NBUT Online Judge</a></li>
<li><strong><em>nyist</em></strong>: <a href="http://acm.nyist.net/JudgeOnline/">NYIST Online Judge</a></li>
<li><strong><em>sysu</em></strong>: <a href="http://soj.me/">SYSU Online Judge</a></li>
<li><strong><em>zjut</em></strong>: <a href="http://cpp.zjut.edu.cn/">ZJUT Online Judge</a></li>
</ul>

    </div>
</div>

<div class="gridcol-1">
    

    

    <div class="cl"></div>
</div>

<div class="gridcol-1">
    


  <!-- Duoshuo Comment BEGIN -->
<div class="ds-thread" data-thread-key="/project/2013/08/07/vjudge-submitter" data-title="Vjudge Submitter"></div>
<script type="text/javascript">
var duoshuoQuery = {short_name:"xadillax"};
(function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = 'http://static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0]
    || document.getElementsByTagName('body')[0]).appendChild(ds);
})();
</script>
<!-- Duoshuo Comment END -->




</div>


                </div>
            </div>

            <div id="footer" class="fl">
                <div class="mini-wrapper">
                    <div class="gridcol-1-2">
                        <h5 class="pattern"><span>关注我</span></h5>
                        <ul>
                            <li><a href="http://127.0.0.1:4000/rss.xml">RSS</a></li>
                            <li><a href="https://github.com/XadillaX">GitHub</a></li>
                        </ul>
                    </div>

                    <div class="gridcol-1-2">
                        <h5 class="pattern"><span>版权</span></h5>
                        <p>© 2013 艾克斯の編碼者.</p>
                        <p>Powered by <a href="http://jekyllrb.com">Jekyll</a></p>
                    </div>
                </div>
            </div>

            <div class="cl"></div>
        </div>

        <div class="cl"></div>
    </div>
</body>
</html>
