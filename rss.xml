<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0">
<channel>
        <title>艾克斯の編碼者</title>
        <description>艾克斯の編碼者 - XadillaX</description>
        <link>http://xadillax.github.io</link>
        <link>http://xadillax.github.io</link>
        <lastBuildDate>2013-08-08T10:54:46+08:00</lastBuildDate>
        <pubDate>2013-08-08T10:54:46+08:00</pubDate>
        <ttl>1800</ttl>


        <item>
                <title>关于JavaScript中callback函数的this指针重定义</title>
                <description>&lt;p&gt;最近在写&lt;strong&gt;NBUT Virtual Judge&lt;/strong&gt;的内核框架，用的又是Node.JS了，把它当作一个本地运行的脚本不断进行轮询。&lt;/p&gt;
&lt;p&gt;众所周知JS中的一个精髓就是&lt;strong&gt;异步回调&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;所以在我自己写的框架中也经常会出现类似于下面的代码：&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;js&quot;&gt;&lt;span class=&quot;nx&quot;&gt;foo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;bar&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(){});&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;总而言之就是写一个函数，这个函数将会调用一个回调函数。&lt;/p&gt;
&lt;p&gt;那么如果我们想在&lt;code&gt;function&lt;/code&gt;中也用&lt;code&gt;this&lt;/code&gt;来指代这个&lt;code&gt;foo&lt;/code&gt;对象该怎么办呢？&lt;/p&gt;
&lt;p&gt;结果还是IRC有用。本人跑Node.JS的IRC上问了这个问题，结果有人就这样回复我了：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;13:07 &amp;lt; shama&amp;gt; xadillax: foo(a, b callback.bind(foo))&lt;/p&gt;
&lt;p&gt;13:10 &amp;lt; olalonde&amp;gt; foo (a, b fn) { fn = fn.bind(this); …. }&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;然后还很热心地给了我个网址：https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind&lt;/p&gt;
&lt;p&gt;总之最后得出的结论就是说：&lt;/p&gt;
&lt;p&gt;你只要给你的callback函数指定一个this指针即可。&lt;/p&gt;
&lt;p&gt;如：&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;js&quot;&gt;&lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;cb&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;callback&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;bind&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;foo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;foo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;bar&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;cb&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;这样就能在回调函数中使用&lt;code&gt;foo&lt;/code&gt;来作为其&lt;code&gt;this&lt;/code&gt;指针了。&lt;/p&gt;
</description>
                <link>http://xadillax.github.io/programming/2013/07/15/javascript-in-function-this-pointer-repoint</link>
                <guid>http://xadillax.github.io/programming/2013/07/15/javascript-in-function-this-pointer-repoint</guid>
                <pubDate>2013-07-15T00:00:00+08:00</pubDate>
        </item>


</channel>
</rss>
